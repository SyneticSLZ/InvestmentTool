<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funding Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class'
        }
    </script>
    <style>
        .dropdown-menu {
            display: none;
        }
        .dropdown-menu.active {
            display: block;
        }
        .modal {
            display: none;
        }
        .modal.active {
            display: flex;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
    <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-40 transition-colors duration-200">
        <div class="container mx-auto px-4 py-3">
            <div class="flex justify-between items-center">
                <!-- Logo and Title -->
                <div class="flex items-center space-x-6">
                    <div class="flex items-center space-x-2">
                        <svg class="w-8 h-8 text-blue-600 dark:text-blue-400" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"></path>
                        </svg>
                        <span class="text-xl font-bold text-gray-900 dark:text-white">FundFlow</span>
                    </div>
                    
                    <!-- Funding Stage Dropdown -->
                    <div class="relative">
                        <button id="fundingDropdown" class="bg-gray-50 dark:bg-gray-700 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg border dark:border-gray-600 transition-colors flex items-center space-x-2">
                            <i class="fas fa-chart-line"></i>
                            <span>Funding Stage</span>
                            <i class="fas fa-chevron-down ml-2"></i>
                        </button>
                        <div id="fundingMenu" class="dropdown-menu absolute mt-2 w-64 bg-white dark:bg-gray-700 rounded-lg shadow-lg border dark:border-gray-600 py-2 max-h-96 overflow-y-auto">
                            <div class="px-4 py-2">
                                <input type="text" placeholder="Search stages..." class="w-full px-3 py-2 rounded-md border dark:border-gray-600 bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 text-sm">
                            </div>
                            <div class="funding-options"></div>
                        </div>
                    </div>
                </div>

                <!-- Right Side Controls -->
                <div class="flex items-center space-x-4">
                    <!-- Refresh Time -->
                    <span id="refreshTimestamp" class="text-sm text-gray-500 dark:text-gray-400"></span>
                    
                    <!-- Action Buttons -->
                    <button id="refreshBtn" class="bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg border dark:border-gray-600 transition-colors flex items-center">
                        <i class="fas fa-sync-alt mr-2"></i>
                        <span>Refresh</span>
                    </button>

                    <!-- Notifications -->
                    <div class="relative">
                        <button id="notificationBtn" class="bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 p-2 rounded-lg border dark:border-gray-600 transition-colors">
                            <i class="fas fa-bell"></i>
                            <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
                        </button>
                    </div>

                    <!-- Dark Mode Toggle -->
                    <button id="darkModeToggle" class="bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 p-2 rounded-lg border dark:border-gray-600 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:inline"></i>
                    </button>

                    <!-- Profile -->
                    <div class="relative">
                        <button id="profileBtn" class="flex items-center space-x-2 bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg border dark:border-gray-600 transition-colors">
                            <img src="https://ui-avatars.com/api/?name=John+Doe" alt="Profile" class="w-6 h-6 rounded-full">
                            <span>John Doe</span>
                            <i class="fas fa-chevron-down ml-2"></i>
                        </button>
                        <div id="profileMenu" class="dropdown-menu absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-lg shadow-lg border dark:border-gray-600 py-2">
                            <a href="#" class="block px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-user mr-2"></i>Profile
                            </a>
                            <a href="#" class="block px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-cog mr-2"></i>Settings
                            </a>
                            <hr class="my-2 border-gray-200 dark:border-gray-600">
                            <a href="#" class="block px-4 py-2 text-red-600 hover:bg-gray-100 dark:hover:bg-gray-600">
                                <i class="fas fa-sign-out-alt mr-2"></i>Logout
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Notifications Modal -->
    <div id="notificationModal" class="modal fixed inset-0 bg-black bg-opacity-50 hidden items-start justify-center pt-20">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md">
            <div class="flex justify-between items-center px-6 py-4 border-b dark:border-gray-700">
                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Notifications</h3>
                <button id="closeNotifications" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="px-6 py-4 max-h-96 overflow-y-auto">
                <div class="space-y-4">
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center">
                            <i class="fas fa-dollar-sign text-blue-600 dark:text-blue-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">New funding round alert for TechCorp</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">2 minutes ago</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center">
                            <i class="fas fa-check text-green-600 dark:text-green-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">Report generation completed</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">1 hour ago</p>
                        </div>
                    </div>
                    <div class="flex items-start space-x-4">
                        <div class="flex-shrink-0 w-8 h-8 bg-yellow-100 dark:bg-yellow-900 rounded-full flex items-center justify-center">
                            <i class="fas fa-bell text-yellow-600 dark:text-yellow-400"></i>
                        </div>
                        <div class="flex-1">
                            <p class="text-sm text-gray-900 dark:text-white">Reminder: Update portfolio stats</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400">2 hours ago</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Funding stages array
        const fundingStages = [
            'pre_seed', 'seed', 'series_a', 'series_b', 'series_c', 'series_d', 
            'series_e', 'series_f', 'series_g', 'series_h', 'series_i', 'series_j', 
            'series_unknown', 'angel', 'private_equity', 'debt_financing', 
            'convertible_note', 'grant', 'corporate_round', 'equity_crowdfunding', 
            'product_crowdfunding', 'secondary_market', 'post_ipo_equity', 
            'post_ipo_debt', 'post_ipo_secondary', 'non_equity_assistance', 
            'initial_coin_offering', 'undisclosed'
        ];

        // Populate funding options
        const fundingOptionsContainer = document.querySelector('.funding-options');
        fundingStages.forEach(stage => {
            const option = document.createElement('a');
            option.href = '#';
            option.className = 'block px-4 py-2 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors';
            option.textContent = stage.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
            fundingOptionsContainer.appendChild(option);
        });

        // Toggle dropdowns and modal
        const notificationModal = document.getElementById('notificationModal');
        const fundingDropdown = document.getElementById('fundingMenu');
        const profileDropdown = document.getElementById('profileMenu');

        // Notification button click handler
        document.getElementById('notificationBtn').addEventListener('click', (event) => {
            event.stopPropagation();
            notificationModal.classList.remove('hidden');
            notificationModal.classList.add('active');
        });

        // Close notification modal
        document.getElementById('closeNotifications').addEventListener('click', () => {
            notificationModal.classList.remove('active');
            setTimeout(() => {
                notificationModal.classList.add('hidden');
            }, 200);
        });

        // Close modal when clicking outside
        notificationModal.addEventListener('click', (event) => {
            if (!event.target.closest('.bg-white.dark\\:bg-gray-800')) {
                notificationModal.classList.remove('active');
                setTimeout(() => {
                    notificationModal.classList.add('hidden');
                }, 200);
            }
        });

        // Handle other dropdowns
        document.addEventListener('click', function(event) {
            if (event.target.closest('#fundingDropdown')) {
                fundingDropdown.classList.toggle('active');
                profileDropdown.classList.remove('active');
            } else if (event.target.closest('#profileBtn')) {
                profileDropdown.classList.toggle('active');
                fundingDropdown.classList.remove('active');
            } else if (!event.target.closest('#fundingMenu') && !event.target.closest('#profileMenu')) {
                fundingDropdown.classList.remove('active');
                profileDropdown.classList.remove('active');
            }
        });

        // Dark mode toggle with local storage persistence
        const darkModeToggle = document.getElementById('darkModeToggle');
        
        // Check for saved dark mode preference
        if (localStorage.getItem('darkMode') === 'true' || 
            (!localStorage.getItem('darkMode') && 
             window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        }

        // Update dark mode state
        function updateDarkMode(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                localStorage.setItem('darkMode', 'true');
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('darkMode', 'false');
            }
        }

        // Toggle dark mode
        darkModeToggle.addEventListener('click', () => {
            const isDark = !document.documentElement.classList.contains('dark');
            updateDarkMode(isDark);
        });

        // Listen for system dark mode changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
            if (!localStorage.getItem('darkMode')) {
                updateDarkMode(e.matches);
            }
        });

        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            document.getElementById('refreshTimestamp').textContent = 
                `Last updated: ${now.toLocaleTimeString()}`;
        }
        updateTimestamp();

        // Refresh button
        document.getElementById('refreshBtn').addEventListener('click', updateTimestamp);

        // Search functionality for funding stages
        const searchInput = document.querySelector('input[type="text"]');
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const options = document.querySelectorAll('.funding-options a');
            
            options.forEach(option => {
                const text = option.textContent.toLowerCase();
                option.style.display = text.includes(searchTerm) ? 'block' : 'none';
            });
        });
    </script>
</body>
</html>